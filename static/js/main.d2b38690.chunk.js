(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{26:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),o=n.n(r),c=n(18),i=n.n(c),s=(n(26),n(9)),l=n(4),h=n(5),u=n(7),d=n(6),j=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={query:""},e.handleSubmit=function(t){t.preventDefault();var n=e.state.query;e.props.onSubmit({query:n})},e.handleInput=function(t){e.setState({query:t.target.value})},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.state.query;return Object(a.jsx)("div",{children:Object(a.jsx)("header",{className:"Searchbar",children:Object(a.jsxs)("form",{className:"SearchForm",onSubmit:this.handleSubmit,children:[Object(a.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(a.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(a.jsx)("input",{className:"SearchForm-input",type:"text",placeholder:"Search images and photos",value:e,onChange:this.handleInput})]})})})}}]),n}(r.Component),p=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"button",className:"Button",onClick:this.props.onLoadMore,children:"Load more"})})}}]),n}(r.Component),b=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onCloseModal(null)},e.handleCloseOverlay=function(t){console.dir(t.target),t.target.className.includes("Overlay")&&e.props.onCloseModal(null)},e}return Object(h.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("click",this.handleCloseOverlay)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("click",this.handleCloseOverlay)}},{key:"render",value:function(){var e=this.props.largeImageURL;return Object(a.jsx)("div",{className:"Overlay",children:Object(a.jsx)("div",{className:"Modal",children:Object(a.jsx)("img",{src:e,alt:""})})})}}]),n}(r.Component),m=n(19),g=n.n(m),v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,a="18864763-1ad3d49af940e9eb25fd728e0",r="https://pixabay.com/api/?q=".concat(e,"&page=").concat(t,"&key=").concat(a,"&image_type=photo&orientation=horizontal&per_page=").concat(n);return g.a.get(r).then((function(e){return e.data.hits}))};function O(e){var t=e.children;return Object(a.jsx)("div",{className:"container",children:Object(a.jsx)("ul",{className:"ImageGallery",children:t})})}var f=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).getLargeImage=function(){e.props.onShowModal(e.props.webURL)},e}return Object(h.a)(n,[{key:"render",value:function(){var e=this.props.webURL;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("li",{className:"ImageGalleryItem",children:Object(a.jsx)("img",{src:e,alt:"",className:"ImageGalleryItem-image",onClick:this.getLargeImage})})})}}]),n}(r.Component),y=n(20),w=n.n(y),x=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{style:{textAlign:"center"},children:[Object(a.jsx)("h3",{children:"Loading..."}),Object(a.jsx)(w.a,{type:"ThreeDots",color:"#3f51b5",height:80,width:80})]})}}]),n}(r.Component),S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={photos:[],loading:!1,query:"",error:null,page:0,largeImageURL:null},e.handleSearchBar=function(t){var n=t.query;e.setState({query:n,photos:[],page:1})},e.onShowModal=function(t){e.setState({largeImageURL:t})},e.toggleModal=function(t){e.setState({largeImageURL:t})},e.fetchPhotosService=function(){var t=e.state,n=t.page,a=t.query;e.setState({loading:!0}),v(a,n).then((function(t){return e.setState((function(e){return{photos:[].concat(Object(s.a)(e.photos),Object(s.a)(t)),page:e.page+1}}))})).catch((function(t){return e.setState({error:t})})).finally((function(){e.setState({loading:!1}),n>1&&e.scrollToEnd()}))},e.scrollToEnd=function(){window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})},e}return Object(h.a)(n,[{key:"componentDidUpdate",value:function(e,t){t.query!==this.state.query&&this.fetchPhotosService()}},{key:"render",value:function(){var e=this,t=this.state,n=t.photos,r=t.loading,o=t.error,c=t.largeImageURL;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsx)(j,{onSubmit:this.handleSearchBar}),o&&Object(a.jsxs)("p",{children:["Whoops, something went wrong: ",o.message]}),r?Object(a.jsx)(x,{}):Object(a.jsx)(O,{children:n.map((function(t){var n=t.id,r=t.webformatURL,o=t.largeImageURL;return Object(a.jsx)(f,{webURL:r,largeImageURL:o,onShowModal:e.onShowModal},n)}))}),n.length>11&&!r&&Object(a.jsx)(p,{onLoadMore:this.fetchPhotosService}),c&&Object(a.jsx)(b,{largeImageURL:c,onCloseModal:this.toggleModal})]})}}]),n}(r.Component);i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(S,{})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.d2b38690.chunk.js.map